{"version":3,"file":"js/nice-select2.js","mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;;;;;;;;;;ACVA;;;;;;;UCAA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;;;;;;;;;;;;ACNmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACe;AACf;AACA,+BAA+B,+BAA+B;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,GAAG;AACH,EAAE;AACF;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gEAAgE,gBAAgB;AAChF;AACA,gEAAgE,YAAY;AAC5E;AACA;AACA;AACA;AACA,gBAAgB,kBAAkB,cAAc,0BAA0B;AAC1E,kBAAkB,gDAAgD;AAClE;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,eAAe;AAC5D,IAAI;AACJ;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,uBAAuB;AAC5D;AACA,KAAK;AACL;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,IAAI;AACJ;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,gBAAgB;AAClE;AACA;AACA;AACA,GAAG;AACH,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,gBAAgB;AAClE;AACA;AACA;AACA,GAAG;AACH,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D,YAAY;AACvE;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA,IAAI;AACJ,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA","sources":["webpack://NiceSelect/webpack/universalModuleDefinition","webpack://NiceSelect/./src/scss/nice-select2.scss?618b","webpack://NiceSelect/webpack/bootstrap","webpack://NiceSelect/webpack/runtime/define property getters","webpack://NiceSelect/webpack/runtime/hasOwnProperty shorthand","webpack://NiceSelect/webpack/runtime/make namespace object","webpack://NiceSelect/./src/js/nice-select2.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"NiceSelect\"] = factory();\n\telse\n\t\troot[\"NiceSelect\"] = factory();\n})(self, () => {\nreturn ","// extracted by mini-css-extract-plugin\nexport {};","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import \"../scss/nice-select2.scss\";\r\n\r\n// utility functions\r\nfunction triggerClick(el) {\r\n\tvar event = document.createEvent(\"MouseEvents\");\r\n\tevent.initEvent(\"click\", true, false);\r\n\tel.dispatchEvent(event);\r\n}\r\n\r\nfunction triggerChange(el) {\r\n\tvar event = document.createEvent(\"HTMLEvents\");\r\n\tevent.initEvent(\"change\", true, false);\r\n\tel.dispatchEvent(event);\r\n}\r\n\r\nfunction triggerInput(el) {\r\n\tvar event = document.createEvent(\"InputEvent\");\r\n\tevent.initEvent(\"change\", true, false);\r\n\tel.dispatchEvent(event);\r\n}\r\n\r\nfunction triggerFocusIn(el) {\r\n\tvar event = document.createEvent(\"FocusEvent\");\r\n\tevent.initEvent(\"focusin\", true, false);\r\n\tel.dispatchEvent(event);\r\n}\r\n\r\nfunction triggerFocusOut(el) {\r\n\tvar event = document.createEvent(\"FocusEvent\");\r\n\tevent.initEvent(\"focusout\", true, false);\r\n\tel.dispatchEvent(event);\r\n}\r\n\r\nfunction triggerModalOpen(el) {\r\n\tvar event = document.createEvent(\"UIEvent\");\r\n\tevent.initEvent(\"modalopen\", true, false);\r\n\tel.dispatchEvent(event);\r\n}\r\n\r\nfunction triggerModalClose(el) {\r\n\tvar event = document.createEvent(\"UIEvent\");\r\n\tevent.initEvent(\"modalclose\", true, false);\r\n\tel.dispatchEvent(event);\r\n}\r\n\r\nfunction triggerValidationMessage(el, type) {\r\n\tif (type == \"invalid\") {\r\n\t\taddClass(this.dropdown, \"invalid\");\r\n\t\tremoveClass(this.dropdown, \"valid\");\r\n\t} else {\r\n\t\taddClass(this.dropdown, \"valid\");\r\n\t\tremoveClass(this.dropdown, \"invalid\");\r\n\t}\r\n}\r\n\r\nfunction attr(el, key) {\r\n\tif (el[key] != undefined) {\r\n\t\treturn el[key];\r\n\t}\r\n\treturn el.getAttribute(key);\r\n}\r\n\r\nfunction data(el, key) {\r\n\treturn el.getAttribute(\"data-\" + key);\r\n}\r\n\r\nfunction hasClass(el, className) {\r\n\tif (el) {\r\n\t\treturn el.classList.contains(className);\r\n\t} else {\r\n\t\treturn false;\r\n\t}\r\n}\r\n\r\nfunction addClass(el, className) {\r\n\tif (el) return el.classList.add(className);\r\n}\r\n\r\nfunction removeClass(el, className) {\r\n\tif (el) return el.classList.remove(className);\r\n}\r\n\r\nvar defaultOptions = {\r\n\tdata: null,\r\n\tsearchable: false,\r\n\tshowSelectedItems: false,\r\n\tserverSide: false,\r\n\tfetchUri: null,\r\n\tfetchOpt: {},\r\n\tfetchRes: null,\r\n};\r\n\r\nexport default function NiceSelect(element, options) {\r\n\tthis.el = element;\r\n\tthis.config = Object.assign({}, defaultOptions, options || {});\r\n\tthis.data = this.config.data;\r\n\tthis.selectedOptions = [];\r\n\r\n\tthis.controller = null;\r\n\tthis.search = \"\";\r\n\tthis.fetch = null;\r\n\r\n\tif (this.config.serverSide) this.config.searchable = options.searchable !== undefined ? options.searchable : true;\r\n\r\n\tthis.placeholder =\r\n\t\tattr(this.el, \"placeholder\") ||\r\n\t\tthis.config.placeholder ||\r\n\t\t\"Select an option\";\r\n\tthis.searchtext =\r\n\t\tattr(this.el, \"searchtext\") || this.config.searchtext || \"Search\";\r\n\tthis.selectedtext =\r\n\t\tattr(this.el, \"selectedtext\") || this.config.selectedtext || \"selected\";\r\n\r\n\tthis.dropdown = null;\r\n\tthis.dropdownInfo = null;\r\n\tthis.dropdownNoresult = null;\r\n\tthis.multiple = attr(this.el, \"multiple\");\r\n\tthis.disabled = attr(this.el, \"disabled\");\r\n\r\n\tthis.create();\r\n}\r\n\r\nNiceSelect.prototype.create = function () {\r\n\tthis.el.style.opacity = \"0\";\r\n\tthis.el.style.width = \"0\";\r\n\tthis.el.style.padding = \"0\";\r\n\tthis.el.style.height = \"0\";\r\n\t\r\n\tif (this.config.serverSide) {\r\n\t\tthis.fetchData();\r\n\t}else{\r\n\t\tif (this.data) {\r\n\t\t\tthis.processData(this.data);\r\n\t\t} else {\r\n\t\t\tthis.extractData();\r\n\t\t}\r\n\r\n\t\tthis.renderDropdown();\r\n\t\tthis.bindEvent();\r\n\t}\r\n};\r\n\r\nNiceSelect.prototype.fetchData = function(q = '', first = true) {\r\n\tthis.controller = new AbortController();\r\n\tconst fetchOption = this.config.fetchOpt;\r\n\tfetchOption.signal = this.controller.signal;\r\n\r\n\tthis.fetch = fetch(this.config.fetchUri+\"?q=\"+q, fetchOption).then(e => e.json()).then(e => {\r\n\t\tif(this.config.fetchRes != null) {\r\n\t\t\tthis.data = this.config.fetchRes(false, e);\r\n\t\t\tthis.processData(this.data, first);\r\n\t\t\tif (first) {\r\n\t\t\t\tthis.renderDropdown();\r\n\t\t\t\tthis.bindEvent();\r\n\t\t\t}else{\r\n\t\t\t\tthis._renderItems(first);\r\n\t\t\t\tthis.showHideInfo();\r\n\t\t\t\tthis.showHideNoResult(this.data.length == 0);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tthis.data = e;\r\n\t\t\tif (first) {\r\n\t\t\t\tthis.renderDropdown();\r\n\t\t\t\tthis.bindEvent();\r\n\t\t\t}else{\r\n\t\t\t\tthis._renderItems(first);\r\n\t\t\t\tthis.showHideInfo();\r\n\t\t\t\tthis.showHideNoResult(this.data.length == 0);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.fetch = null;\r\n\t}).catch(err => {\r\n\t\tthis.showHideInfo();\r\n\t\tthis.showHideNoResult();\r\n\t\tthis.fetch = null;\r\n\t\tif(this.config.fetchRes != null) this.config.fetchRes(err, null);\r\n\t\tconsole.error(err.message);\r\n\t});\r\n}\r\n\r\nNiceSelect.prototype.processData = function (data, first = true) {\r\n\tif(first) {\r\n\t\tvar opt = this.el.querySelectorAll(\"option,optgroup\");\r\n\t\tthis.selectedOptions = [...opt].map(e => {\r\n\t\t\treturn {\r\n\t\t\t\tdata: {\r\n\t\t\t\t\ttext: e.innerHTML ?? \"\",\r\n\t\t\t\t\tvalue: e.getAttribute(\"value\") ?? \"\",\r\n\t\t\t\t\tselected: e.getAttribute(\"selected\") != null,\r\n\t\t\t\t\tdisabled: e.getAttribute(\"disabled\") != null,\r\n\t\t\t\t},\r\n\t\t\t\tattributes: {\r\n\t\t\t\t\tselected: e.getAttribute(\"selected\") != null,\r\n\t\t\t\t\tdisabled: e.getAttribute(\"disabled\") != null,\r\n\t\t\t\t\toptgroup: e.value == \"optgroup\",\r\n\t\t\t\t},\r\n\t\t\t}\r\n\t\t});\r\n\t}else{\r\n\t\tif (this.selectedOptions.length > 0 && this.search == \"\") {\r\n\t\t\tlet sel = this.selectedOptions.filter(e => !data.find(x => x.value == e.data.value)).map(e => {\r\n\t\t\t\te.data.selected = e.attributes.selected;\r\n\t\t\t\te.data.disabled = e.attributes.disabled;\r\n\t\t\t\treturn e.data;\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tdata = [...sel, ...data];\r\n\t\t}\r\n\t}\r\n\t\r\n\tthis.options = data.map(item => {\r\n\t\tlet fn = this.selectedOptions.find(e => e.data.value == item.value && e.attributes.selected);\r\n\t\titem.selected = fn ? true : false;\r\n\r\n\t\tif (this.config.serverSide) {\r\n\t\t\tlet opt = new Option(item.text, item.value, false, !!item.selected);\r\n\t\t\tthis.el.append(opt);\r\n\t\t}\r\n\t\treturn {\r\n\t\t\tdata: item,\r\n\t\t\tattributes: {\r\n\t\t\t\tselected: !!item.selected,\r\n\t\t\t\tdisabled: !!item.disabled,\r\n\t\t\t\toptgroup: item.value == \"optgroup\",\r\n\t\t\t},\r\n\t\t}\r\n\t});\r\n};\r\n\r\nNiceSelect.prototype.extractData = function () {\r\n\tvar options = this.el.querySelectorAll(\"option,optgroup\");\r\n\t\r\n\tthis.options = [...options].map(e => {\r\n\t\tif (e.tagName == \"OPTGROUP\") {\r\n\t\t\treturn {\r\n\t\t\t\tdata: {\r\n\t\t\t\t\ttext: e.label,\r\n\t\t\t\t\tvalue: \"optgroup\",\r\n\t\t\t\t},\r\n\t\t\t\tattributes: {\r\n\t\t\t\t\tselected: e.getAttribute(\"selected\") != null,\r\n\t\t\t\t\tdisabled: e.getAttribute(\"disabled\") != null,\r\n\t\t\t\t\toptgroup: e.tagName == \"OPTGROUP\",\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\treturn {\r\n\t\t\t\tdata: {\r\n\t\t\t\t\ttext: e.dataset.display != undefined ? e.dataset.display : e.innerHTML,\r\n\t\t\t\t\tvalue: e.value,\r\n\t\t\t\t},\r\n\t\t\t\tattributes: {\r\n\t\t\t\t\tselected: e.getAttribute(\"selected\") != null,\r\n\t\t\t\t\tdisabled: e.getAttribute(\"disabled\") != null,\r\n\t\t\t\t\toptgroup: e.tagName == \"OPTGROUP\",\r\n\t\t\t\t}\r\n\t\t\t}\t\r\n\t\t}\r\n\t});\r\n\r\n\tthis.data = this.options.reduce((a, b) => {\r\n\t\ta.push(b.data);\r\n\t\treturn a;\r\n\t}, []);\r\n\r\n\tthis.selectedOptions = this.options.filter(e => e.attributes.selected);\r\n};\r\n\r\nNiceSelect.prototype.renderDropdown = function () {\r\n\tvar classes = [\r\n\t\t\"nice-select\",\r\n\t\tattr(this.el, \"class\") || \"\",\r\n\t\tthis.disabled ? \"disabled\" : \"\",\r\n\t\tthis.multiple ? \"has-multiple\" : \"\",\r\n\t];\r\n\r\n\tlet searchHtml = `\r\n\t\t<div class=\"nice-select-search-box\">\r\n\t\t\t<input type=\"text\" class=\"nice-select-search\" placeholder=\"${this.searchtext}...\" title=\"search\"/>\r\n\t\t\t<div class=\"nice-select-info\">Searching...</div>\r\n\t\t\t<div class=\"nice-select-info-noResult\">No result found: <b>${this.search}</b></div>\r\n\t\t</div>\r\n\t`;\r\n\r\n\tvar html = `\r\n\t\t<div class=\"${classes.join(\" \")}\" tabindex=\"${this.disabled ? null : 0 }\">\r\n\t\t\t<span class=\"${this.multiple ? \"multiple-options\" : \"current\" }\"></span>\r\n\t\t\t<div class=\"nice-select-dropdown\">\r\n\t\t\t\t${this.config.searchable ? searchHtml : \"\"}\r\n\t\t\t\t<ul class=\"list\"></ul>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t`;\r\n\r\n\tthis.el.insertAdjacentHTML(\"afterend\", html);\r\n\r\n\tthis.dropdown = this.el.nextElementSibling;\r\n\tthis.dropdownInfo = this.dropdown.querySelector(\".nice-select-info\");\r\n\tthis.dropdownNoresult = this.dropdown.querySelector(\".nice-select-info-noResult\");\r\n\tthis._renderSelectedItems();\r\n\tthis._renderItems();\r\n};\r\n\r\nNiceSelect.prototype._renderSelectedItems = function () {\r\n\tif (this.multiple) {\r\n\t\tvar selectedHtml = \"\";\r\n\t\tif (\r\n\t\t\tthis.config.showSelectedItems ||\r\n\t\t\tthis.config.showSelectedItems ||\r\n\t\t\twindow.getComputedStyle(this.dropdown).width == \"auto\" ||\r\n\t\t\tthis.selectedOptions.length < 2\r\n\t\t) {\r\n\t\t\tthis.selectedOptions.forEach(function (item) {\r\n\t\t\t\tselectedHtml += `<span class=\"current\">${item.data.text}</span>`;\r\n\t\t\t});\r\n\r\n\t\t\tselectedHtml = selectedHtml == \"\" ? this.placeholder : selectedHtml;\r\n\t\t} else {\r\n\t\t\tselectedHtml = this.selectedOptions.length + \" \" + this.selectedtext;\r\n\t\t}\r\n\r\n\t\tthis.dropdown.querySelector(\".multiple-options\").innerHTML = selectedHtml;\r\n\t} else {\r\n\t\tvar html =\r\n\t\t\tthis.selectedOptions.length > 0\r\n\t\t\t\t? this.selectedOptions[0].data.text\r\n\t\t\t\t: this.placeholder;\r\n\r\n\t\tthis.dropdown.querySelector(\".current\").innerHTML = html;\r\n\t}\r\n};\r\n\r\nNiceSelect.prototype._renderItems = function (first) {\r\n\tvar ul = this.dropdown.querySelector(\"ul\");\r\n\t[...ul.children].forEach(e => e.remove());\r\n\r\n\tthis.options.forEach((item) => {\r\n\t\tul.appendChild(this._renderItem(item));\r\n\t});\r\n\r\n\tif (this.config.serverSide && !first) {\r\n\t\tthis.dropdown.querySelectorAll(\".focus\").forEach(function (item) {\r\n\t\t\tremoveClass(item, \"focus\");\r\n\t\t});\r\n\t\r\n\t\tvar firstEl = this._findNext(null);\r\n\t\taddClass(firstEl, \"focus\");\r\n\t}\r\n};\r\n\r\nNiceSelect.prototype._renderItem = function (option) {\r\n\tvar el = document.createElement(\"li\");\r\n\r\n\tel.innerHTML = option.data.text;\r\n\r\n\tif (option.attributes.optgroup) {\r\n\t\taddClass(el, \"optgroup\");\r\n\t} else {\r\n\t\tel.setAttribute(\"data-value\", option.data.value);\r\n\t\tvar classList = [\r\n\t\t\t\"option\",\r\n\t\t\toption.attributes.selected ? \"selected\" : null,\r\n\t\t\toption.attributes.disabled ? \"disabled\" : null,\r\n\t\t];\r\n\r\n\t\tel.addEventListener(\"click\", this._onItemClicked.bind(this, option));\r\n\t\tel.classList.add(...classList);\r\n\t}\r\n\r\n\toption.element = el;\r\n\treturn el;\r\n};\r\n\r\nNiceSelect.prototype.update = function () {\r\n\tthis.extractData();\r\n\tif (this.dropdown) {\r\n\t\tvar open = hasClass(this.dropdown, \"open\");\r\n\t\tthis.dropdown.parentNode.removeChild(this.dropdown);\r\n\t\tthis.create();\r\n\r\n\t\tif (open) {\r\n\t\t\ttriggerClick(this.dropdown);\r\n\t\t}\r\n\t}\r\n\r\n\tif (attr(this.el, \"disabled\")) {\r\n\t\tthis.disable();\r\n\t} else {\r\n\t\tthis.enable();\r\n\t}\r\n};\r\n\r\nNiceSelect.prototype.disable = function () {\r\n\tif (!this.disabled) {\r\n\t\tthis.disabled = true;\r\n\t\taddClass(this.dropdown, \"disabled\");\r\n\t}\r\n};\r\n\r\nNiceSelect.prototype.enable = function () {\r\n\tif (this.disabled) {\r\n\t\tthis.disabled = false;\r\n\t\tremoveClass(this.dropdown, \"disabled\");\r\n\t}\r\n};\r\n\r\nNiceSelect.prototype.clear = function () {\r\n\tthis.resetSelectValue();\r\n\tthis.selectedOptions = [];\r\n\tthis._renderSelectedItems();\r\n\tthis.update();\r\n\r\n\ttriggerChange(this.el);\r\n};\r\n\r\nNiceSelect.prototype.destroy = function () {\r\n\tif (this.dropdown) {\r\n\t\tthis.dropdown.parentNode.removeChild(this.dropdown);\r\n\t\tthis.el.style.display = \"\";\r\n\t}\r\n};\r\n\r\nNiceSelect.prototype.bindEvent = function () {\r\n\tvar $this = this;\r\n\tthis.dropdown.addEventListener(\"click\", this._onClicked.bind(this));\r\n\tthis.dropdown.addEventListener(\"keydown\", this._onKeyPressed.bind(this));\r\n\tthis.dropdown.addEventListener(\"focusin\", triggerFocusIn.bind(this, this.el));\r\n\tthis.dropdown.addEventListener(\r\n\t\t\"focusout\",\r\n\t\ttriggerFocusOut.bind(this, this.el)\r\n\t);\r\n\tthis.el.addEventListener(\r\n\t\t\"invalid\",\r\n\t\ttriggerValidationMessage.bind(this, this.el, \"invalid\")\r\n\t);\r\n\twindow.addEventListener(\"click\", this._onClickedOutside.bind(this));\r\n\r\n\tif (this.config.searchable) {\r\n\t\tthis._bindSearchEvent();\r\n\t}\r\n};\r\n\r\nNiceSelect.prototype._bindSearchEvent = function () {\r\n\tvar searchBox = this.dropdown.querySelector(\".nice-select-search\");\r\n\tif (searchBox) {\r\n\t\tsearchBox.addEventListener(\"click\", function (e) {\r\n\t\t\te.stopPropagation();\r\n\t\t\treturn false;\r\n\t\t});\r\n\t}\r\n\r\n\tsearchBox.addEventListener(\"input\", this._onSearchChanged.bind(this));\r\n};\r\n\r\nNiceSelect.prototype._onClicked = function (e) {\r\n\te.preventDefault();\r\n\tif (!hasClass(this.dropdown, \"open\")) {\r\n\t\taddClass(this.dropdown, \"open\");\r\n\t\ttriggerModalOpen(this.el);\r\n\t} else {\r\n\t\tif (this.multiple) {\r\n\t\t\tif (e.target == this.dropdown.querySelector(\".multiple-options\")) {\r\n\t\t\t\tremoveClass(this.dropdown, \"open\");\r\n\t\t\t\ttriggerModalClose(this.el);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tremoveClass(this.dropdown, \"open\");\r\n\t\t\ttriggerModalClose(this.el);\r\n\t\t}\r\n\t}\r\n\r\n\tvar search = this.dropdown.querySelector(\".nice-select-search\");\r\n\tif (hasClass(this.dropdown, \"open\")) {\r\n\t\tif (search) {\r\n\t\t\tsearch.value = \"\";\r\n\t\t\tsearch.focus();\r\n\t\t}\r\n\r\n\t\tvar t = this.dropdown.querySelector(\".focus\");\r\n\t\tremoveClass(t, \"focus\");\r\n\t\tt = this.dropdown.querySelector(\".selected\");\r\n\t\taddClass(t, \"focus\");\r\n\t\tthis.dropdown.querySelectorAll(\"ul li\").forEach(function (item) {\r\n\t\t\titem.style.display = \"\";\r\n\t\t});\r\n\t} else {\r\n\t\tthis.dropdown.focus();\r\n\t\tthis._resetDataServerSide();\r\n\t}\r\n};\r\n\r\nNiceSelect.prototype._onItemClicked = function (option, e) {\r\n\tvar optionEl = e.target;\r\n\r\n\tif (!hasClass(optionEl, \"disabled\")) {\r\n\t\tif (this.multiple) {\r\n\t\t\tif (hasClass(optionEl, \"selected\")) {\r\n\t\t\t\tremoveClass(optionEl, \"selected\");\r\n\t\t\t\tthis.selectedOptions.splice(this.selectedOptions.indexOf(option), 1);\r\n\t\t\t\tthis.el\r\n\t\t\t\t\t.querySelector(`option[value=\"${optionEl.dataset.value}\"]`)\r\n\t\t\t\t\t.removeAttribute(\"selected\");\r\n\t\t\t} else {\r\n\t\t\t\taddClass(optionEl, \"selected\");\r\n\t\t\t\tthis.selectedOptions.push(option);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tthis.options.forEach(function (item) {\r\n\t\t\t\tremoveClass(item.element, \"selected\");\r\n\t\t\t});\r\n\t\t\tthis.selectedOptions.forEach(function (item) {\r\n\t\t\t\tremoveClass(item.element, \"selected\");\r\n\t\t\t});\r\n\r\n\t\t\taddClass(optionEl, \"selected\");\r\n\t\t\toption.attributes.selected = true;\r\n\t\t\tthis.selectedOptions = [option];\r\n\t\t}\r\n\r\n\t\tthis._renderSelectedItems();\r\n\t\tthis.updateSelectValue();\r\n\t}\r\n};\r\n\r\nNiceSelect.prototype.updateSelectValue = function () {\r\n\tif (this.multiple) {\r\n\t\tvar select = this.el;\r\n\t\tthis.selectedOptions.forEach(function (item) {\r\n\t\t\tvar el = select.querySelector(`option[value=\"${item.data.value}\"]`);\r\n\t\t\tif (el) {\r\n\t\t\t\tel.setAttribute(\"selected\", true);\r\n\t\t\t}\r\n\t\t});\r\n\t} else if (this.selectedOptions.length > 0) {\r\n\t\tthis.el.value = this.selectedOptions[0].data.value;\r\n\t}\r\n\ttriggerChange(this.el);\r\n};\r\n\r\nNiceSelect.prototype.resetSelectValue = function () {\r\n\tif (this.multiple) {\r\n\t\tvar select = this.el;\r\n\t\tthis.selectedOptions.forEach(function (item) {\r\n\t\t\tvar el = select.querySelector(`option[value=\"${item.data.value}\"]`);\r\n\t\t\tif (el) {\r\n\t\t\t\tel.removeAttribute(\"selected\");\r\n\t\t\t}\r\n\t\t});\r\n\t} else if (this.selectedOptions.length > 0) {\r\n\t\tthis.el.selectedIndex = -1;\r\n\t}\r\n\r\n\ttriggerChange(this.el);\r\n};\r\n\r\nNiceSelect.prototype._onClickedOutside = function (e) {\r\n\tif (!this.dropdown.contains(e.target)) {\r\n\t\tif(hasClass(this.dropdown, \"open\")) this._resetDataServerSide();\r\n\t\tremoveClass(this.dropdown, \"open\");\r\n\t\ttriggerModalClose(this.el);\r\n\t}\r\n};\r\n\r\nNiceSelect.prototype._onKeyPressed = function (e) {\r\n\t// Keyboard events\r\n\r\n\tvar focusedOption = this.dropdown.querySelector(\".focus\");\r\n\r\n\tvar open = hasClass(this.dropdown, \"open\");\r\n\r\n\t// Enter\r\n\tif (e.keyCode == 13) {\r\n\t\tif (open) {\r\n\t\t\ttriggerClick(focusedOption);\r\n\t\t} else {\r\n\t\t\ttriggerClick(this.dropdown);\r\n\t\t}\r\n\t} else if (e.keyCode == 40) {\r\n\t\t// Down\r\n\t\tif (!open) {\r\n\t\t\ttriggerClick(this.dropdown);\r\n\t\t} else {\r\n\t\t\tvar next = this._findNext(focusedOption);\r\n\t\t\tif (next) {\r\n\t\t\t\tvar t = this.dropdown.querySelector(\".focus\");\r\n\t\t\t\tremoveClass(t, \"focus\");\r\n\t\t\t\taddClass(next, \"focus\");\r\n\t\t\t}\r\n\t\t}\r\n\t\te.preventDefault();\r\n\t} else if (e.keyCode == 38) {\r\n\t\t// Up\r\n\t\tif (!open) {\r\n\t\t\ttriggerClick(this.dropdown);\r\n\t\t} else {\r\n\t\t\tvar prev = this._findPrev(focusedOption);\r\n\t\t\tif (prev) {\r\n\t\t\t\tvar t = this.dropdown.querySelector(\".focus\");\r\n\t\t\t\tremoveClass(t, \"focus\");\r\n\t\t\t\taddClass(prev, \"focus\");\r\n\t\t\t}\r\n\t\t}\r\n\t\te.preventDefault();\r\n\t} else if (e.keyCode == 27 && open) {\r\n\t\t// Esc\r\n\t\ttriggerClick(this.dropdown);\r\n\t} else if (e.keyCode === 32 && open) {\r\n\t\t// Space\r\n\t\treturn false;\r\n\t}\r\n\treturn false;\r\n};\r\n\r\nNiceSelect.prototype._findNext = function (el) {\r\n\tif (el) {\r\n\t\tel = el.nextElementSibling;\r\n\t} else {\r\n\t\tel = this.dropdown.querySelector(\".list .option\");\r\n\t}\r\n\r\n\twhile (el) {\r\n\t\tif (!hasClass(el, \"disabled\") && el.style.display != \"none\") {\r\n\t\t\treturn el;\r\n\t\t}\r\n\t\tel = el.nextElementSibling;\r\n\t}\r\n\r\n\treturn null;\r\n};\r\n\r\nNiceSelect.prototype._findPrev = function (el) {\r\n\tif (el) {\r\n\t\tel = el.previousElementSibling;\r\n\t} else {\r\n\t\tel = this.dropdown.querySelector(\".list .option:last-child\");\r\n\t}\r\n\r\n\twhile (el) {\r\n\t\tif (!hasClass(el, \"disabled\") && el.style.display != \"none\") {\r\n\t\t\treturn el;\r\n\t\t}\r\n\t\tel = el.previousElementSibling;\r\n\t}\r\n\r\n\treturn null;\r\n};\r\n\r\nNiceSelect.prototype._onSearchChanged = function (e) {\r\n\tvar open = hasClass(this.dropdown, \"open\");\r\n\tvar text = e.target.value;\r\n\tthis.search = text;\r\n\r\n\tif (this.config.serverSide) {\r\n\t\tif(this.controller != null && this.fetch != null) this.controller.abort();\r\n\t\tthis.dropdownNoresult.innerHTML = `No result found: <b>${this.search}</b>`;\r\n\t\tthis.showHideInfo(true);\r\n\t\tthis.showHideNoResult();\r\n\t\tthis.fetchData(text, false);\r\n\t}else{\r\n\t\ttext = text.toLowerCase();\r\n\t\tif (text == \"\") {\r\n\t\t\tthis.options.forEach(function (item) {\r\n\t\t\t\titem.element.style.display = \"\";\r\n\t\t\t});\r\n\t\t} else if (open) {\r\n\t\t\tvar matchReg = new RegExp(text);\r\n\t\t\tthis.options.forEach(function (item) {\r\n\t\t\t\tvar optionText = item.data.text.toLowerCase();\r\n\t\t\t\tvar matched = matchReg.test(optionText);\r\n\t\t\t\titem.element.style.display = matched ? \"\" : \"none\";\r\n\t\t\t});\r\n\t\t}\r\n\t\r\n\t\tthis.dropdown.querySelectorAll(\".focus\").forEach(function (item) {\r\n\t\t\tremoveClass(item, \"focus\");\r\n\t\t});\r\n\t\r\n\t\tvar firstEl = this._findNext(null);\r\n\t\taddClass(firstEl, \"focus\");\r\n\t}\r\n\r\n};\r\n\r\nNiceSelect.prototype._resetDataServerSide = function () { \r\n\tthis.search = \"\";\r\n\tthis.showHideInfo();\r\n\tthis.showHideNoResult();\r\n\tthis.fetchData(\"\", false);\r\n}\r\n\r\nNiceSelect.prototype.showHideInfo = function (show = false) { \r\n\tthis.dropdownInfo.style.display = show ? \"block\" : \"none\";\r\n}\r\nNiceSelect.prototype.showHideNoResult = function (show = false) { \r\n\tthis.dropdownNoresult.style.display = show ? \"block\" : \"none\";\r\n}\r\n\r\nexport function bind(el, options) {\r\n\treturn new NiceSelect(el, options);\r\n}\r\n"],"names":[],"sourceRoot":""}